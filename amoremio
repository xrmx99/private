<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Per Te ‚ù§Ô∏è</title>
  <meta name="description" content="Una piccola sorpresa, per dirti quanto ti amo." />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Great+Vibes&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg1:#0f0c29; --bg2:#302b63; --bg3:#24243e;
      --card:#ffffff; --muted:#6b7280; --accent:#ff3b7c; --accent2:#ffd1dc; --ring:#ffe4ec;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:#111; background:linear-gradient(135deg,var(--bg1),var(--bg2) 40%,var(--bg3));
      font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overflow-x:hidden;
    }
    /* floating hearts in background */
    .hearts{position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:0}
    .heart{position:absolute; width:14px; height:14px; background:var(--accent); transform:rotate(45deg); opacity:.45; filter: drop-shadow(0 0 10px rgba(255,59,124,.3));}
    .heart::before,.heart::after{content:""; position:absolute; width:14px; height:14px; background:var(--accent); border-radius:50%}
    .heart::before{left:-7px}
    .heart::after{top:-7px}
    @keyframes floatUp{
      0%{transform:translateY(0) scale(.6) rotate(45deg); opacity:.0}
      10%{opacity:.45}
      100%{transform:translateY(-120vh) scale(1.2) rotate(45deg); opacity:0}
    }

    /* layout */
    .wrap{min-height:100%; display:grid; place-items:center; padding:28px}
    .card{
      position:relative; z-index:1; width:min(820px, 94vw); background:linear-gradient(180deg,#fff, #fff8fb);
      border-radius:24px; box-shadow:0 20px 60px rgba(0,0,0,.35);
      border:2px solid var(--ring);
      overflow:hidden;
    }
    .ribbon{position:absolute; inset:auto -40px 0 -40px; height:180px; background:radial-gradient(120% 120% at 50% 0, rgba(255,59,124,.2), transparent 60%)}
    header{padding:48px 36px 10px; text-align:center}
    .script{font-family:'Great Vibes', cursive; font-size:56px; line-height:1; color:var(--accent); text-shadow:0 6px 24px rgba(255,59,124,.35)}
    h1{margin:8px 0 0; font-size:30px; font-weight:800; letter-spacing:.3px}
    p.lead{margin:12px auto 24px; color:#374151; max-width:56ch}

    .cta{display:flex; justify-content:center; gap:12px; flex-wrap:wrap; padding:8px 0 28px}
    .btn{appearance:none; border:none; outline:none; cursor:pointer; font-weight:700; letter-spacing:.2px;
      padding:14px 20px; border-radius:14px; transition:transform .06s ease, box-shadow .2s ease, background .2s ease;
      box-shadow:0 10px 24px rgba(255,59,124,.25);
    }
    .btn-primary{background:var(--accent); color:#fff}
    .btn-primary:hover{transform:translateY(-1px)}
    .btn-secondary{background:#fff; color:var(--accent); border:2px solid var(--accent)}

    /* sections */
    section{padding:22px 26px 26px}
    .grid{display:grid; gap:18px}
    @media (min-width:720px){.grid{grid-template-columns:1.2fr .8fr}}

    .cardInner{background:#fff; border:1px solid #ffeaf1; border-radius:18px; padding:18px; box-shadow:0 8px 20px rgba(0,0,0,.06)}
    .muted{color:var(--muted)}

    .reveal{max-height:0; overflow:hidden; transition:max-height .9s cubic-bezier(.2,.8,.2,1)}
    .reveal.open{max-height:1600px}

    ul.love{list-style:none; padding:0; margin:0}
    ul.love li{padding:10px 12px; border-radius:12px; margin:6px 0; background:linear-gradient(180deg,#fff,#fff5f8); border:1px solid #ffe3ed}
    ul.love li b{color:#ef2a6b}

    .quote{font-style:italic; text-align:center; padding:14px 18px; border-left:8px solid var(--accent); background:linear-gradient(90deg,#fff,#fff0f5)}

    .footer{padding:22px 26px 36px; text-align:center; color:#fff; opacity:.9}

    /* confetti canvas */
    #confetti{position:fixed; inset:0; pointer-events:none; z-index:2}

    /* timeline */
    .timeline{position:relative; margin:6px 0 0 0}
    .timeline::before{content:""; position:absolute; left:14px; top:0; bottom:0; width:3px; background:#ffe0ea}
    .moment{display:grid; grid-template-columns:36px 1fr; gap:10px; margin:12px 0}
    .dot{width:28px; height:28px; border-radius:50%; background:var(--accent); display:grid; place-items:center; color:#fff; font-size:14px; box-shadow:0 6px 18px rgba(255,59,124,.35)}
    .moment .text{background:#fff; border:1px solid #ffe3ed; padding:12px 14px; border-radius:14px}

    /* footer pulse heart */
    .pulse{display:inline-grid; place-items:center; width:52px; height:52px; border-radius:50%; background:#fff; color:var(--accent); margin-inline:auto; box-shadow:0 10px 24px rgba(255,59,124,.35)}
    .pulse::after{content:""; position:absolute; width:52px; height:52px; border-radius:50%; background:rgba(255,59,124,.18); animation:pulse 1.8s infinite}
    @keyframes pulse{0%{transform:scale(1); opacity:1} 100%{transform:scale(1.9); opacity:0}}

    /* small helper */
    .sr-only{position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0}
  </style>
</head>
<body>
  <canvas id="confetti"></canvas>
  <div class="hearts" id="bgHearts" aria-hidden="true"></div>

  <div class="wrap">
    <div class="card" role="region" aria-label="Sorpresa romantica">
      <div class="ribbon" aria-hidden="true"></div>
      <header>
        <div class="script" id="dear">Amore mio</div>
        <h1>Questa pagina √® solo per te</h1>
        <p class="lead">A parole non basta mai. Cos√¨ ho creato qualcosa di semplice: ogni riga qui dentro √® un pezzetto di quello che provo. Spero ti arrivi forte e chiaro quanto sei importante per me. üíñ</p>
      </header>

      <div class="cta">
        <button class="btn btn-primary" id="openBtn">Apri il tuo regalo</button>
        <button class="btn btn-secondary" id="nameBtn" title="Personalizza con il tuo nome">Personalizza il nome ‚úçÔ∏è</button>
      </div>

      <section class="reveal" id="reveal">
        <div class="grid">
          <div class="cardInner">
            <h2 style="margin:0 0 8px">Dieci motivi per cui ti amo</h2>
            <p class="muted" style="margin-top:0">Cancellali, cambiali, aggiungine altri. La lista non finisce mai.</p>
            <ul class="love" id="reasons">
              <li><b>1.</b> Il tuo sorriso cambia le mie giornate.</li>
              <li><b>2.</b> Sai rendere leggera anche una giornata pesante.</li>
              <li><b>3.</b> Con te mi sento a casa, ovunque.</li>
              <li><b>4.</b> Mi ascolti, davvero.</li>
              <li><b>5.</b> Amiamo ridere delle stesse cose.</li>
              <li><b>6.</b> Mi spingi a essere migliore, senza chiedermelo.</li>
              <li><b>7.</b> I piccoli gesti: una mano, un messaggio, uno sguardo.</li>
              <li><b>8.</b> La tua gentilezza con gli altri mi fa innamorare ancora.</li>
              <li><b>9.</b> Il tuo profumo, la tua voce, la tua presenza.</li>
              <li><b>10.</b> Perch√© con te l‚Äôamore √® semplice.</li>
            </ul>
          </div>

          <div class="cardInner">
            <h2 style="margin:0 0 8px">Ricordi che amo</h2>
            <p class="muted" style="margin-top:0">Aggiungine quanti vuoi, questa √® solo una traccia.</p>
            <div class="timeline" id="timeline">
              <div class="moment">
                <div class="dot">üí´</div>
                <div class="text"><b>Il primo sguardo:</b> ho capito che sarebbe stato speciale.</div>
              </div>
              <div class="moment">
                <div class="dot">üåä</div>
                <div class="text"><b>Quella passeggiata:</b> silenzio, risate, e la sensazione giusta.</div>
              </div>
              <div class="moment">
                <div class="dot">üçï</div>
                <div class="text"><b>Una cena semplice:</b> eppure non la dimentico.</div>
              </div>
            </div>
            <button class="btn btn-secondary" id="addMoment">Aggiungi un ricordo ‚ú®</button>
          </div>
        </div>

        <div class="cardInner" style="margin-top:18px">
          <h2 style="margin:0 0 8px">Lettera per te</h2>
          <p class="muted" style="margin-top:0">Scritta con il cuore. Modificala come vuoi prima di mostrarla.</p>
          <div class="quote" contenteditable="true" spellcheck="true" id="letter">
            Ti amo. Non per quello che fai, ma per quello che sei quando siamo insieme. Con te ho capito che la felicit√† ha un suono preciso: il tuo nome.
          </div>
          <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:12px">
            <button class="btn btn-secondary" id="copyLetter">Copia testo</button>
            <button class="btn btn-primary" id="confettiBtn">Scoppia la gioia üéâ</button>
          </div>
        </div>

        <div class="cardInner" style="margin-top:18px">
          <h2 style="margin:0 0 8px">Promessa</h2>
          <p class="muted" style="margin-top:0">Breve, chiara, vera.</p>
          <ul class="love">
            <li>Ci sar√≤ nei giorni facili e in quelli testardi.</li>
            <li>Ti sceglier√≤ ogni mattina.</li>
            <li>Protegger√≤ il nostro tempo come la cosa pi√π preziosa.</li>
          </ul>
        </div>
      </section>

      <div class="footer">
        <div class="pulse" aria-hidden="true">‚ù§Ô∏è</div>
        <p style="margin:14px 0 2px">Con tutto il mio amore</p>
        <p class="muted" style="margin:0 0 4px">Sempre tuo</p>
      </div>
    </div>
  </div>

  <script>
    // Personalizza nome calligraphy
    document.getElementById('nameBtn').addEventListener('click', () => {
      const name = prompt('Scrivi il suo nome (o un nomignolo):', 'Amore mio');
      if(name){ document.getElementById('dear').textContent = name; }
    });

    // Reveal section
    const reveal = document.getElementById('reveal');
    document.getElementById('openBtn').addEventListener('click', () => {
      reveal.classList.add('open');
      burstConfetti();
      gentleVibrate();
    });

    // Aggiungi ricordo
    document.getElementById('addMoment').addEventListener('click', () => {
      const icon = prompt('Scegli un'emoji per il ricordo (es. üåü):', 'üåü') || 'üåü';
      const text = prompt('Scrivi il ricordo:');
      if(!text) return;
      const wrap = document.createElement('div');
      wrap.className = 'moment';
      wrap.innerHTML = `<div class="dot">${icon}</div><div class="text">${text}</div>`;
      document.getElementById('timeline').appendChild(wrap);
      gentleVibrate();
    });

    // Copia lettera
    document.getElementById('copyLetter').addEventListener('click', async () => {
      const text = document.getElementById('letter').innerText.trim();
      try {
        await navigator.clipboard.writeText(text);
        toast('Lettera copiata negli appunti.');
      } catch(e){ toast('Non sono riuscito a copiare. Seleziona e copia a mano.'); }
    });

    // Confetti button
    document.getElementById('confettiBtn').addEventListener('click', burstConfetti);

    // Tiny toast
    function toast(msg){
      const t = document.createElement('div');
      t.textContent = msg; t.style.position='fixed'; t.style.left='50%'; t.style.bottom='24px'; t.style.transform='translateX(-50%)';
      t.style.background='rgba(17,17,17,.92)'; t.style.color='#fff'; t.style.padding='10px 14px'; t.style.borderRadius='10px'; t.style.fontSize='14px'; t.style.zIndex=5;
      document.body.appendChild(t); setTimeout(()=>{t.style.opacity='0'; t.style.transition='opacity .5s';}, 1800);
      setTimeout(()=>t.remove(), 2400);
    }

    // Light haptics
    function gentleVibrate(){ if('vibrate' in navigator) navigator.vibrate(15); }

    // Background hearts
    const bg = document.getElementById('bgHearts');
    for(let i=0;i<36;i++){
      const h=document.createElement('div'); h.className='heart';
      const size=8+Math.random()*14; h.style.width=h.style.height=size+'px';
      h.style.left=Math.random()*100+'vw'; h.style.bottom=(-10-Math.random()*120)+'px';
      const d=6+Math.random()*10; h.style.animation=`floatUp ${d}s linear ${Math.random()*-d}s infinite`;
      bg.appendChild(h);
    }

    // Simple confetti
    const canvas = document.getElementById('confetti');
    const ctx = canvas.getContext('2d');
    let confetti = []; let w, h; resize();
    window.addEventListener('resize', resize);

    function resize(){ w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; }

    function burstConfetti(){
      const count = 220, angleSpread = Math.PI*2; const power = 7;
      for(let i=0;i<count;i++){
        confetti.push({
          x:w/2, y:h/2, r:2+Math.random()*4, a:Math.random()*angleSpread,
          v: power*(.6+Math.random()*0.7), g: .15 + Math.random()*0.25,
          c: Math.random()<.5? '#ff3b7c' : (Math.random()<.5? '#ffd1dc' : '#ffffff')
        });
      }
      animate();
    }

    let animating = false;
    function animate(){
      if(animating) return; animating = true;
      const frame = () => {
        ctx.clearRect(0,0,w,h);
        confetti = confetti.filter(p => p.y < h+12);
        confetti.forEach(p => {
          p.x += Math.cos(p.a) * p.v; p.y += Math.sin(p.a) * p.v; p.v *= .98; p.y += p.g;
          ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
          ctx.fillStyle = p.c; ctx.fill();
        });
        if(confetti.length>0){ requestAnimationFrame(frame); } else { animating=false; }
      };
      requestAnimationFrame(frame);
    }

    // Auto open if hash present
    if(location.hash === '#open') reveal.classList.add('open');
  </script>
</body>
</html>
